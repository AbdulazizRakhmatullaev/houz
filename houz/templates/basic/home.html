{% extends 'base.html' %}

{% block title %} Home {% endblock %}

{% block content %}

<div id="room-container">
    {% include "temps/room_list.html" %}
</div>

<div class="pagination">
    <span class="step-links">
        {% if rooms.has_previous %}
            <a href="?page=1" class="pgitm">&laquo; first</a>
            <a href="?page={{ rooms.previous_page_number }}" class="pgitm">previous</a>
        {% endif %}

        <span class="current" class="pgitm">
            Page {{ rooms.number }} of {{ rooms.paginator.num_pages }}
        </span>

        {% if rooms.has_next %}
            <a href="?page={{ rooms.next_page_number }}" class="pgitm">next</a>
            <a href="?page={{ rooms.paginator.num_pages }}" class="pgitm">last &raquo;</a>
        {% endif %}
    </span>
</div>

{% endblock %}

{% block footer %}
{% endblock %}

{% block scripts %}
<script>
    function updateRoomList() {
        var filter = document.getElementById('filter').value;
        var filterValue;

        if (filter === 'city') {
            filterValue = document.getElementById('city-filter').value;
        } else if (filter === 'rating') {
            filterValue = document.getElementById('rating-order').value;
        }

        var url = window.location.pathname + '?filter=' + filter;
        if (filterValue) {
            url += '&' + filter + '=' + filterValue;
        }

        $.ajax({
            url: url,
            type: 'GET',
            success: function(response) {
                $('#room-posts').html(response);
            }
        });
    }
</script>
{% endblock %}
